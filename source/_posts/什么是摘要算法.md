---
title: 什么是摘要算法
date: 2020-06-12 18:54:38
tags:
    - 产品安全知识
    - 摘要算法
    - 加密算法
---

# 一、Hash算法（摘要算法）
>Hash算法特别的地方在于它是一种单向算法，用户可以通过hash算法对目标信息生成一段特定长度的唯一hash值，却不能通过这个hash值重新获得目标信息。因此Hash算法常用在不可还原的密码存储、信息完整性校验等。

<!--more-->

* 特点：
1.无论输入的消息有多长，计算出来的消息摘要的长度总是固定的。
>例如应用MD5算法摘要的消息有128个比特位，用SHA-1算法摘要的消息最终有160比特位的输出，SHA-1的变体可以产生192比特位和256比特位的消息摘要。一般认为，摘要的最终输出越长，该摘要算法就越安全。变长输入，定长输出。

2.只要输入的消息不同，对其进行摘要以后产生的摘要消息也必不相同；但相同的输入必会产生相同的输出。
>这正是好的消息摘要算法所具有的性质：输入改变了，输出也就改变了；两条相似的消息的摘要确不相近，甚至会大相径庭。从理论上来说，不管使用什么样的摘要算法，必然存在2个不同的消息，对应同样的摘要。因为输入是一个无穷集合，而输出是一个有限集合，所以从数学上来说，必然存在多对一的关系。但是实际上，很难或者说根本不可能人为的造出具有同样摘要的2个不同消息。所以我们选择摘要算法的时候，要注意其安全性。比如现在MD5就是不安全的，已经被国内王小云破解。

3.消息摘要是单向、不可逆的。
>只能进行正向的信息摘要，而无法从摘要中恢复出任何的原始消息，甚至根本就找不到任何与原信息相关的信息。当然，可以采用强力攻击的方法，即尝试每一个可能的信息，计算其摘要，看看是否与已有的摘要相同，如果这样做，最终肯定会恢复出摘要的消息。但实际上，要得到的信息可能是无穷个消息之一，所以这种强力攻击几乎是无效的。

4.好的摘要算法，没有人能从中找到“碰撞”，虽然“碰撞”是肯定存在的。
>即无法找到两条不同消息，但是它们的摘要相同。


* 分类：
```
MD(Message Digest)：消息摘要
SHA(Secure Hash Algorithm)：安全散列
MAC(Message Authentication Code)：消息认证码
```

这三类算法的主要作用：验证数据的完整性,消息摘要算法是有关于数字签名的核心算法。
常见的摘要算法有: MD2、MD4、MD5、HAVAL、SHA、MAC


# 二、摘要算法介绍

* MD算法
>Message-Digest Algorithm 5，消息摘要算法版本5。由Ron Rivest（RSA公司）在1992年提出，目前被广泛应用于数据完整性校验、数据（消息）摘要、数据加密等。MD2、MD4、MD5 都产生16字节（128位）的校验值，一般用32位十六进制数表示。MD2的算法较慢但相对安全，MD4速度很快，但安全性下降，MD5比MD4更安全、速度更快。

MD算法家族：
生成的消息摘要都是128位的。
包括：MD2，MD4，MD5
从安全性上说：MD5 > MD4 > MD2

| 算法 | 摘要长度 | 实现方     |
| ---- | -------- | ------------- |
| MD2  | 128      | JDK           |
| MD4  | 128      | Bouncy Castle |
| MD5  | 128      | JDK           |



* SHA算法
>SHA（Secure Hash Algorithm）是由美国专门制定密码算法的标准机构——美国国家标准技术研究院（NIST）制定的，SHA系列算法的摘要长度分别为：SHA为20字节（160位）、SHA256为32字节（256位）、 SHA384为48字节（384位）、SHA512为64字节（512位），由于它产生的数据摘要的长度更长，因此更难以发生碰撞，因此也更为安全，它是未来数据摘要算法的发展方向。由于SHA系列算法的数据摘要长度较长，因此其运算速度与MD5相比，也相对较慢。
目前SHA1的应用较为广泛，主要应用于CA和数字证书中，另外在目前互联网中流行的BT软件中，也是使用SHA1来进行文件校验的。

包括：SHA-1，SHA-2(SHA-224，SHA-256，SHA-384，SHA-512)
 
| 算法  | 摘要长度 | 实现方     |
| ------- | -------- | ------------- |
| SHA-1   | 160      | JDK           |
| SHA-224 | 224      | Bouncy Castle |
| SHA-256 | 256      | JDK           |
| SHA-384 | 384      | JDK           |
| SHA-512 | 512      | JDK           |



* MAC算法
>又称为HMAC（keyed-Hash Message Authentication Code），在MD与SHA系列算法的基础上加入了密钥，含有密钥的散列函数算法
包含了MD和SHA两个系列的消息摘要算法.是三大常用的消息摘要算法中最安全的一个。

MD系列：HmacMD2，HmacMD4，HmacMD5
SHA系列：HmacSHA1，HmacSHA224，HmacSHA256，HmacSHA38
，HmacSHA512
 
| 算法     | 摘要长度 | 实现方     |
| ---------- | -------- | ------------- |
| HmacMD2    | 128      | Bouncy Castle |
| HmacMD4    | 128      | Bouncy Castle |
| HmacMD5    | 128      | JDK           |
| HmacSHA1   | 160      | JDK           |
| HmacSHA224 | 224      | Bouncy Castle |
| HmacSHA256 | 256      | JDK           |
| HmacSHA384 | 384      | JDK           |
| HmacSHA512 | 512      | JDK           |


x